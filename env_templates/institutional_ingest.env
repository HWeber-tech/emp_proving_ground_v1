# Institutional ingest stack defaults for docker/institutional-ingest/docker-compose.yml
# Copy to .env and adjust secrets before running in staging or production.

# Timescale connection (maps to TimescaleConnectionSettings)
TIMESCALE_URL=postgresql+psycopg2://emp:empchangeme@localhost:5433/emp_market
TIMESCALE_APPLICATION_NAME=emp_institutional_ingest
TIMESCALE_SYMBOLS=EURUSD,GBPUSD,USDJPY
TIMESCALE_LOOKBACK_DAYS=90
TIMESCALE_ENABLE_INTRADAY=true
TIMESCALE_INTRADAY_LOOKBACK_DAYS=5
TIMESCALE_INTRADAY_INTERVAL=5m

# Redis cache (maps to RedisConnectionSettings)
REDIS_URL=redis://localhost:6380/0
REDIS_CLIENT_NAME=emp_institutional_cache
REDIS_TTL_SECONDS=900
REDIS_MAX_KEYS=2048
REDIS_INVALIDATE_PREFIXES=timescale:daily:,timescale:intraday:

# Kafka ingest bridge
KAFKA_BOOTSTRAP_SERVERS=localhost:9094
KAFKA_INGEST_DEFAULT_TOPIC=telemetry.ingest
KAFKA_INGEST_CONSUMER_TOPICS=telemetry.ingest
KAFKA_READINESS_WARN_LAG_MESSAGES=500
KAFKA_READINESS_FAIL_LAG_MESSAGES=2000

# Failover drill expectations
TIMESCALE_FAILOVER_ENABLED=true
TIMESCALE_FAILOVER_DIMENSIONS=daily,intraday
TIMESCALE_FAILOVER_LABEL=staged_timescale_outage
TIMESCALE_FAILOVER_RUN_FALLBACK=true
